<section class="portfolio-section" id="experience">
  <div class="container">
    <h2 class="section-title">Experience</h2>

    <div class="exp-timeline">
      <div *ngFor="let exp of experiences(); let i = index; let last = last" class="exp-entry reveal" [class]="'reveal-delay-' + i">

        <!-- Timeline connector -->
        <div class="timeline-line" *ngIf="!last"></div>
        <div class="timeline-node">
          <div class="node-dot"></div>
        </div>

        <!-- Card -->
        <div class="exp-card glass embossed">
          <!-- Header -->
          <div class="exp-header">
            <div class="company-info">
              <div class="company-logo-wrap">
                <img [src]="exp.logo" [alt]="exp.company" class="company-logo" onerror="this.style.display='none';this.nextElementSibling.style.display='flex'">
                <div class="company-logo-fallback">{{ exp.company[0] }}</div>
              </div>
              <div>
                <h3 class="company-name">{{ exp.company }}</h3>
                <p class="role-name">{{ exp.role }}</p>
              </div>
            </div>

            <div class="exp-meta">
              <div class="type-chip" [class]="exp.type">{{ getTypeLabel(exp.type) }}</div>
              <!-- Attractive date range -->
              <div class="date-range-visual">
                <div class="date-from">
                  <span class="date-label mono">FROM</span>
                  <span class="date-val">{{ formatDate(exp.dateFrom) }}</span>
                </div>
                <div class="date-arrow">
                  <div class="arrow-line"></div>
                  <span class="duration-badge">{{ getDuration(exp.dateFrom, exp.dateTo) }}</span>
                  <div class="arrow-head"></div>
                </div>
                <div class="date-to" [class.present]="!exp.dateTo">
                  <span class="date-label mono">{{ exp.dateTo ? 'TO' : 'CURRENTLY' }}</span>
                  <span class="date-val">{{ formatDate(exp.dateTo) }}</span>
                </div>
              </div>
            </div>
          </div>

          <p class="exp-location mono"><i class="fas fa-map-marker-alt"></i> {{ exp.location }}</p>
          <p class="exp-description">{{ exp.description }}</p>

          <!-- Tasks -->
          <div class="exp-section">
            <h4 class="exp-section-title"><i class="fas fa-tasks"></i> Key Contributions</h4>
            <div class="task-list">
              <div *ngFor="let task of exp.tasks" class="task-item">
                <div class="task-bullet"></div>
                <span>{{ task }}</span>
              </div>
            </div>
          </div>

          <!-- Projects -->
          <div class="exp-section">
            <h4 class="exp-section-title"><i class="fas fa-code-branch"></i> Projects & Modules</h4>
            <div class="project-tags">
              <span *ngFor="let p of exp.projects" class="project-tag skill-badge">{{ p }}</span>
            </div>
          </div>

          <!-- Tech stack -->
          <div class="exp-section">
            <h4 class="exp-section-title"><i class="fas fa-layer-group"></i> Tech Stack</h4>
            <div class="badges-wrap">
              <span *ngFor="let t of exp.techStack" class="skill-badge">{{ t }}</span>
            </div>
          </div>

          <!-- Proof button -->
          <div class="proof-wrap">
            <div class="proof-btn"
              (mouseenter)="showProof(exp, $event)"
              (mouseleave)="hideProof()">
              <i class="fas fa-certificate"></i>
              <span>Proof</span>
              <div class="proof-tooltip glass embossed" *ngIf="proofExpId() === exp.id" [style.top.px]="proofPosition().y" [style.left.px]="proofPosition().x">
                <img [src]="exp.certificateImage" [alt]="exp.company + ' certificate'" class="cert-preview-img">
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
