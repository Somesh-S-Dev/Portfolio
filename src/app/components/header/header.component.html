<header class="portfolio-header glass embossed" [class.dark]="themeService.isDark()">
  <div class="header-inner">
    <!-- Left: Role + Company -->
    <div class="role-info" *ngIf="profile()">
      <span class="role-badge">
        <span class="live-dot"></span>
        <span class="role-text">{{ profile()!.currentRole }}</span>
        <span class="separator">{{ '@' }}</span>
        <span class="company">{{ profile()!.currentCompany }}</span>
      </span>
      <span class="tenure mono">{{ tenure() }}</span>
    </div>

    <!-- Center: Nav -->
    <nav class="nav-links">
      <button *ngFor="let s of sections" class="nav-btn" (click)="scrollTo(s.id)">
        {{ s.label }}
        <span class="nav-underline"></span>
      </button>
    </nav>

    <!-- Right: Climate Slider + Theme Toggle + Theme Pill -->
    <div class="theme-controls">
      <!-- Climate Effect Slider -->
      <div class="climate-slider-wrap">
        <div class="climate-labels">
          <span *ngFor="let opt of climateOptions; let i = index" class="climate-label"
            [class.active]="climateIndex() === i" (click)="setClimateByIndex(i)">
            {{ opt.icon }}
          </span>
        </div>
        <input type="range" class="climate-slider" min="0" [max]="climateOptions.length - 1" step="1"
          [value]="climateIndex()" (input)="setClimate($event)">
      </div>

      <!-- Dynamic / Static sliding toggle -->
      <div class="mode-toggle" [class.dynamic]="themeService.mode() === 'dynamic'"
        (click)="setMode(themeService.mode() === 'dynamic' ? 'dark' : 'dynamic')">
        <div class="toggle-track">
          <span class="toggle-label" [class.active]="themeService.mode() !== 'dynamic'">Static</span>
          <span class="toggle-label" [class.active]="themeService.mode() === 'dynamic'">Dynamic</span>
          <div class="toggle-slider"></div>
        </div>
      </div>

      <!-- Theme info pill -->
      <button class="theme-pill glass" (click)="showThemePanel.set(!showThemePanel())">
        <span>{{ themeService.getThemeLabel(themeService.currentTheme()) }}</span>
        <i class="fas fa-chevron-down" [class.rotated]="showThemePanel()"></i>
      </button>

      <!-- Theme Panel dropdown -->
      <div class="theme-panel glass embossed" *ngIf="showThemePanel()" (click)="$event.stopPropagation()">
        <button class="theme-option" [class.active]="themeService.mode() === 'dynamic'"
          (click)="selectTheme('dynamic')">
          üïê Dynamic (Auto)
        </button>
        <div class="light-dark-switch">
          <button class="ld-btn" [class.active]="themeService.currentTheme() === 'morning'"
            (click)="selectTheme('light')">‚òÄÔ∏è</button>
          <button class="ld-btn" [class.active]="themeService.currentTheme() === 'night'"
            (click)="selectTheme('dark')">üåô</button>
        </div>
      </div>
    </div>
  </div>
</header>